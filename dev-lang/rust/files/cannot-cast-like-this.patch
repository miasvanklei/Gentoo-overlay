From 0378b40171b4976e98d6be5823c73c342bb2f338 Mon Sep 17 00:00:00 2001
From: Jake Goulding <jake.goulding@gmail.com>
Date: Sun, 25 Sep 2016 10:08:42 -0400
Subject: [PATCH] [4.0][Lost Functionality] DI Metadata can no longer be cast
 like this

---
 src/rustllvm/RustWrapper.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/rustllvm/RustWrapper.cpp b/src/rustllvm/RustWrapper.cpp
index b9862cb..f8bb00e 100644
--- a/src/rustllvm/RustWrapper.cpp
+++ b/src/rustllvm/RustWrapper.cpp
@@ -565,7 +565,8 @@ extern "C" LLVMRustMetadataRef LLVMRustDIBuilderCreateStaticVariable(
         unwrapDI<DIType>(Ty),
         isLocalToUnit,
 #if LLVM_VERSION_GE(4,0)
-        unwrapDI<DIExpression>(Val),
+        // unwrapDI<DIExpression>((LLVMRustMetadataRef) Val),
+                                              nullptr, // TODO: LOST usefulness
 #else
         cast<Constant>(unwrap(Val)),
 #endif
