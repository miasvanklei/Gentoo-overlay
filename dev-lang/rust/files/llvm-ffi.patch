From: Jakub Jirutka <jakub@jirutka.cz>
Date: Thu, 04 Aug 2016 17:53:00 +0200
Subject: [PATCH] Workaround for external LLVM built with LLVM_ENABLE_FFI

Workaround for problem with LLVM_ENABLE_FFI described in
https://github.com/rust-lang/rust/issues/34486.

--- a/src/librustc_llvm/lib.rs	2016-08-23 23:16:33.138961790 +0200
+++ b/src/librustc_llvm/lib.rs	2016-08-23 23:17:05.387915780 +0200
@@ -481,3 +481,6 @@
 mod llvmdeps {
     include! { env!("CFG_LLVM_LINKAGE_FILE") }
 }
+
+#[link(name = "ffi")]
+extern {}
