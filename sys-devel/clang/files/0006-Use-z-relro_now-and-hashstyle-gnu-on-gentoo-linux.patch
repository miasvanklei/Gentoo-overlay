Use "-z relro", "-z now", and "--hash-style=gnu" on Gentoo Linux

---
 lib/Driver/ToolChains.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/Driver/ToolChains.cpp b/lib/Driver/ToolChains.cpp
index 70b53bd..46326f0 100644
--- a/lib/Driver/ToolChains.cpp
+++ b/lib/Driver/ToolChains.cpp
@@ -4011,8 +4036,14 @@
                        .str());
 
   Distro Distro(D.getVFS());
+  StringRef VendorName = Linux::getTriple().getVendorName();
+
+  if (VendorName.compare("gentoo") == 0) {
+    ExtraOpts.push_back("-z");
+    ExtraOpts.push_back("now");
+  }
 
-  if (Distro.IsOpenSUSE() || Distro.IsUbuntu()) {
+  if (Distro.IsOpenSUSE() || Distro.IsUbuntu() || VendorName.compare("gentoo") == 0) {
     ExtraOpts.push_back("-z");
     ExtraOpts.push_back("relro");
   }
@@ -4032,8 +4063,8 @@
   // ABI requires a mapping between the GOT and the symbol table.
   // Android loader does not support .gnu.hash.
   if (!IsMips && !IsAndroid) {
-    if (Distro.IsRedhat() || Distro.IsOpenSUSE() ||
-        (Distro.IsUbuntu() && Distro >= Distro::UbuntuMaverick))
+    if (Distro.IsRedhat() || Distro.IsOpenSUSE() || VendorName.compare("gentoo") == 0 ||
+       (Distro.IsUbuntu() && Distro >= Distro::UbuntuMaverick))
       ExtraOpts.push_back("--hash-style=gnu");
 
     if (Distro.IsDebian() || Distro.IsOpenSUSE() || Distro == Distro::UbuntuLucid ||
