diff --git a/app-crypt/libsecret/libsecret-0.20.4.ebuild b/app-crypt/libsecret/libsecret-0.20.4.ebuild
index c9c4c19e256..c08be7bbf7f 100644
--- a/app-crypt/libsecret/libsecret-0.20.4.ebuild
+++ b/app-crypt/libsecret/libsecret-0.20.4.ebuild
@@ -29,7 +29,7 @@ DEPEND="
 "
 RDEPEND="${DEPEND}"
 # gnome-keyring needed at runtime as explained at https://bugs.gentoo.org/475182#c2
-PDEPEND=">=gnome-base/gnome-keyring-3" # to avoid circular dep (bug #547456)
+#PDEPEND=">=gnome-base/gnome-keyring-3" # to avoid circular dep (bug #547456)
 BDEPEND="
 	dev-libs/libxslt
 	dev-util/gdbus-codegen
diff --git a/app-emulation/crun/crun-0.17.ebuild b/app-emulation/crun/crun-0.17.ebuild
index bc97b2bddb1..c5115af2510 100644
--- a/app-emulation/crun/crun-0.17.ebuild
+++ b/app-emulation/crun/crun-0.17.ebuild
@@ -21,6 +21,7 @@ DEPEND="
 	>=dev-libs/yajl-2.0.0
 	caps? ( sys-libs/libcap )
 	criu? ( >=sys-process/criu-3.15 )
+	elibc_musl? ( sys-libs/argp-standalone )
 	seccomp? ( sys-libs/libseccomp )
 	systemd? ( sys-apps/systemd:= )
 "
diff --git a/app-emulation/libvirt/libvirt-7.2.0.ebuild b/app-emulation/libvirt/libvirt-7.2.0.ebuild
index 56d210fe894..0660d9cb8bb 100644
--- a/app-emulation/libvirt/libvirt-7.2.0.ebuild
+++ b/app-emulation/libvirt/libvirt-7.2.0.ebuild
@@ -108,8 +108,6 @@ RDEPEND="
 	selinux? ( >=sys-libs/libselinux-2.0.85 )
 	virt-network? (
 		net-dns/dnsmasq[dhcp,ipv6,script]
-		net-firewall/ebtables
-		>=net-firewall/iptables-1.4.10[ipv6]
 		net-misc/radvd
 		sys-apps/iproute2[-minimal]
 	)
diff --git a/app-emulation/spice/spice-0.14.3-r1.ebuild b/app-emulation/spice/spice-0.14.3-r1.ebuild
index e0f50554501..16f96f899be 100644
--- a/app-emulation/spice/spice-0.14.3-r1.ebuild
+++ b/app-emulation/spice/spice-0.14.3-r1.ebuild
@@ -3,7 +3,7 @@
 
 EAPI=7
 
-PYTHON_COMPAT=( python3_{7,8} )
+PYTHON_COMPAT=( python3_{7,8,9} )
 inherit autotools python-any-r1 readme.gentoo-r1 xdg-utils
 
 DESCRIPTION="SPICE server"
diff --git a/app-emulation/virt-manager/virt-manager-3.2.0.ebuild b/app-emulation/virt-manager/virt-manager-3.2.0.ebuild
index 373dc31ea2b..1b9173e029c 100644
--- a/app-emulation/virt-manager/virt-manager-3.2.0.ebuild
+++ b/app-emulation/virt-manager/virt-manager-3.2.0.ebuild
@@ -40,7 +40,6 @@ RDEPEND="${PYTHON_DEPS}
 		gnome-base/dconf
 		>=net-libs/gtk-vnc-0.3.8[gtk3(+),introspection]
 		net-misc/spice-gtk[usbredir,gtk3,introspection,sasl?]
-		net-misc/x11-ssh-askpass
 		x11-libs/gtk+:3[introspection]
 		x11-libs/gtksourceview:4[introspection]
 		x11-libs/vte:2.91[introspection]
diff --git a/app-text/xmlto/xmlto-0.0.28-r3.ebuild b/app-text/xmlto/xmlto-0.0.28-r3.ebuild
index fcc8c8274dc..a324dec6cef 100644
--- a/app-text/xmlto/xmlto-0.0.28-r3.ebuild
+++ b/app-text/xmlto/xmlto-0.0.28-r3.ebuild
@@ -22,7 +22,7 @@ RDEPEND=">=app-text/docbook-xsl-stylesheets-1.62.0-r1
 	>=sys-apps/coreutils-6.10-r1
 	|| ( sys-apps/util-linux app-misc/getopt )
 	sys-apps/which
-	text? ( || ( virtual/w3m www-client/lynx www-client/elinks ) )
+	text? ( || ( virtual/w3m www-client/lynx www-client/links ) )
 	latex? ( dev-texlive/texlive-formatsextra )"
 # We only depend on flex when we patch the imput lexer.
 DEPEND="${RDEPEND}"
diff --git a/dev-libs/icu/icu-68.2.ebuild b/dev-libs/icu/icu-68.2.ebuild
index 1b834bbdc0c..aba1f56f535 100644
--- a/dev-libs/icu/icu-68.2.ebuild
+++ b/dev-libs/icu/icu-68.2.ebuild
@@ -31,7 +31,6 @@ MULTILIB_CHOST_TOOLS=(
 PATCHES=(
 	"${FILESDIR}/${PN}-65.1-remove-bashisms.patch"
 	"${FILESDIR}/${PN}-64.2-darwin.patch"
-	"${FILESDIR}/${PN}-68.1-nonunicode.patch"
 )
 
 src_prepare() {
diff --git a/dev-libs/libffi/libffi-3.3-r2.ebuild b/dev-libs/libffi/libffi-3.3-r2.ebuild
index fc243c08f0f..7333adeba8a 100644
--- a/dev-libs/libffi/libffi-3.3-r2.ebuild
+++ b/dev-libs/libffi/libffi-3.3-r2.ebuild
@@ -50,19 +50,7 @@ src_prepare() {
 
 multilib_src_configure() {
 	use userland_BSD && export HOST="${CHOST}"
-	# --includedir= path maintains a few properties:
-	# 1. have stable name across libffi versions: some packages like
-	#    dev-lang/ghc or kde-frameworks/networkmanager-qt embed
-	#    ${includedir} at build-time. Don't require those to be
-	#    rebuilt unless SONAME changes. bug #695788
-	#
-	#    We use /usr/.../${PN} (instead of former /usr/.../${P}).
-	#
-	# 2. have ${ABI}-specific location as ffi.h is target-dependent.
-	#
-	#    We use /usr/$(get_libdir)/... to have ABI identifier.
 	econf \
-		--includedir="${EPREFIX}"/usr/$(get_libdir)/${PN}/include \
 		--disable-multi-os-directory \
 		$(use_enable static-libs static) \
 		$(use_enable pax_kernel pax_emutramp) \
diff --git a/dev-python/pypax/pypax-0.9.5.ebuild b/dev-python/pypax/pypax-0.9.5.ebuild
index 845cf590fad..38eeea07c72 100644
--- a/dev-python/pypax/pypax-0.9.5.ebuild
+++ b/dev-python/pypax/pypax-0.9.5.ebuild
@@ -4,7 +4,7 @@
 EAPI=6
 
 DISTUTILS_USE_SETUPTOOLS=no
-PYTHON_COMPAT=( python{3_7,3_8} )
+PYTHON_COMPAT=( python{3_7,3_8,3_9} )
 
 inherit distutils-r1
 
diff --git a/dev-util/flatpak-builder/flatpak-builder-1.0.11.ebuild b/dev-util/flatpak-builder/flatpak-builder-1.0.11.ebuild
index a8017f003f1..27fdf168897 100644
--- a/dev-util/flatpak-builder/flatpak-builder-1.0.11.ebuild
+++ b/dev-util/flatpak-builder/flatpak-builder-1.0.11.ebuild
@@ -21,6 +21,7 @@ RDEPEND="
 	>=dev-libs/libxml2-2.4:=
 	dev-libs/json-glib:=
 	net-misc/curl:=
+	elibc_musl? ( dev-libs/libdwarf )
 	yaml? ( dev-libs/libyaml:= )
 "
 DEPEND="${RDEPEND}"
diff --git a/eclass/linux-mod.eclass b/eclass/linux-mod.eclass
index 11b0fd0cfb5..7c73787135c 100644
--- a/eclass/linux-mod.eclass
+++ b/eclass/linux-mod.eclass
@@ -683,6 +683,7 @@ linux-mod_src_compile() {
 			eval "emake HOSTCC=\"$(tc-getBUILD_CC)\" \
 						CROSS_COMPILE=${CHOST}- \
 						LDFLAGS=\"$(get_abi_LDFLAGS)\" \
+						LLVM_IAS=1 \
 						${BUILD_FIXES} \
 						${BUILD_PARAMS} \
 						${BUILD_TARGETS} " \
diff --git a/kde-plasma/kde-gtk-config/kde-gtk-config-5.21.3.ebuild b/kde-plasma/kde-gtk-config/kde-gtk-config-5.21.3.ebuild
index beb08dab9bc..b8aa0039d9f 100644
--- a/kde-plasma/kde-gtk-config/kde-gtk-config-5.21.3.ebuild
+++ b/kde-plasma/kde-gtk-config/kde-gtk-config-5.21.3.ebuild
@@ -21,7 +21,6 @@ BDEPEND="
 	dev-lang/sassc
 "
 DEPEND="
-	dev-cpp/glibmm:2
 	dev-libs/glib:2
 	>=dev-qt/qtdbus-${QTMIN}:5
 	>=dev-qt/qtgui-${QTMIN}:5
diff --git a/media-libs/mesa/mesa-21.0.1.ebuild b/media-libs/mesa/mesa-21.0.1.ebuild
index ebeac9698ee..5e3fe231752 100644
--- a/media-libs/mesa/mesa-21.0.1.ebuild
+++ b/media-libs/mesa/mesa-21.0.1.ebuild
@@ -142,9 +142,10 @@ RDEPEND="${RDEPEND}
 # 1. List all the working slots (with min versions) in ||, newest first.
 # 2. Update the := to specify *max* version, e.g. < 10.
 # 3. Specify LLVM_MAX_SLOT, e.g. 9.
-LLVM_MAX_SLOT="11"
+LLVM_MAX_SLOT="12"
 LLVM_DEPSTR="
 	|| (
+		sys-devel/llvm:12[${MULTILIB_USEDEP}]
 		sys-devel/llvm:11[${MULTILIB_USEDEP}]
 		sys-devel/llvm:10[${MULTILIB_USEDEP}]
 	)
diff --git a/media-video/pipewire/pipewire-0.3.24.ebuild b/media-video/pipewire/pipewire-0.3.24.ebuild
index 77f2f8a90cb..5e7ac46ac6f 100644
--- a/media-video/pipewire/pipewire-0.3.24.ebuild
+++ b/media-video/pipewire/pipewire-0.3.24.ebuild
@@ -19,7 +19,7 @@ HOMEPAGE="https://pipewire.org/"
 
 LICENSE="LGPL-2.1+"
 SLOT="0/0.3"
-IUSE="bluetooth debug doc ffmpeg gstreamer jack sdl sndfile systemd test vulkan X"
+IUSE="aac bluetooth debug doc ffmpeg gstreamer jack sdl sndfile systemd +realtime test vulkan X"
 
 BDEPEND="
 	app-doc/xmltoman
@@ -32,8 +32,11 @@ RDEPEND="
 	>=media-libs/alsa-lib-1.1.7
 	sys-apps/dbus
 	virtual/libudev
+	aac? ( media-libs/fdk-aac )
 	bluetooth? (
 		media-libs/sbc
+		media-libs/libopenaptx
+		media-libs/libldac
 		net-wireless/bluez:=
 	)
 	ffmpeg? ( media-video/ffmpeg:= )
@@ -43,6 +46,7 @@ RDEPEND="
 		media-libs/gst-plugins-base:1.0
 	)
 	jack? ( >=media-sound/jack2-1.9.10:2 )
+	realtime? ( sys-auth/rtkit )
 	sdl? ( media-libs/libsdl2 )
 	sndfile? ( >=media-libs/libsndfile-1.0.20 )
 	systemd? ( sys-apps/systemd )
@@ -68,7 +72,7 @@ src_prepare() {
 
 	default
 	spa_use libcamera
-	spa_use rtkit
+	spa_use realtime rtkit
 	spa_use bluetooth bluez5
 	spa_use jack
 	spa_use vulkan
diff --git a/net-libs/gtk-vnc/gtk-vnc-1.0.0.ebuild b/net-libs/gtk-vnc/gtk-vnc-1.0.0.ebuild
index 1229170f286..f1d4da09624 100644
--- a/net-libs/gtk-vnc/gtk-vnc-1.0.0.ebuild
+++ b/net-libs/gtk-vnc/gtk-vnc-1.0.0.ebuild
@@ -2,7 +2,7 @@
 # Distributed under the terms of the GNU General Public License v2
 
 EAPI=7
-PYTHON_COMPAT=( python3_{7,8} )
+PYTHON_COMPAT=( python3_{7,8,9} )
 
 inherit gnome.org vala meson python-any-r1 xdg
 
@@ -60,7 +60,7 @@ src_configure() {
 		$(meson_feature pulseaudio)
 		$(meson_feature sasl)
 		-Denable-werror=false
-		-Dwith-coroutine=auto # gthread on windows, libc ucontext elsewhere; neither has extra deps
+		-Dwith-coroutine=gthread # gthread on windows, libc ucontext elsewhere; neither has extra deps
 		$(meson_use vala with-vala)
 	)
 	meson_src_configure
diff --git a/net-misc/spice-gtk/spice-gtk-0.39.ebuild b/net-misc/spice-gtk/spice-gtk-0.39.ebuild
index 8f9a666c3e7..dd1186f619f 100644
--- a/net-misc/spice-gtk/spice-gtk-0.39.ebuild
+++ b/net-misc/spice-gtk/spice-gtk-0.39.ebuild
@@ -92,6 +92,7 @@ src_prepare() {
 
 src_configure() {
 	local emesonargs=(
+		-Dcoroutine=gthread
 		$(meson_feature gtk3 gtk)
 		$(meson_feature introspection)
 		$(meson_use mjpeg builtin-mjpeg)
diff --git a/sys-devel/clang/clang-12.0.0_rc4.ebuild b/sys-devel/clang/clang-12.0.0_rc4.ebuild
index f0164c6eaea..92ce8749315 100644
--- a/sys-devel/clang/clang-12.0.0_rc4.ebuild
+++ b/sys-devel/clang/clang-12.0.0_rc4.ebuild
@@ -29,6 +29,8 @@ REQUIRED_USE="${PYTHON_REQUIRED_USE}
 	|| ( ${ALL_LLVM_TARGETS[*]} )"
 RESTRICT="!test? ( test )"
 
+IUSE="${IUSE} default-libunwind +flang gcc-symlinks"
+
 RDEPEND="
 	~sys-devel/llvm-${PV}:${SLOT}=[debug=,${MULTILIB_USEDEP}]
 	static-analyzer? ( dev-lang/perl:* )
@@ -52,12 +54,17 @@ RDEPEND="${RDEPEND}
 PDEPEND="
 	sys-devel/clang-common
 	~sys-devel/clang-runtime-${PV}
+	flang? (
+		dev-libs/libpgmath
+		dev-lang/flang
+		sys-devel/llvm[flang] )
 	default-compiler-rt? ( =sys-libs/compiler-rt-${PV%_*}* )
+	default-libunwind? ( >=sys-libs/llvm-libunwind-${PV} )
 	default-libcxx? ( >=sys-libs/libcxx-${PV} )
 	default-lld? ( sys-devel/lld )"
 
 LLVM_COMPONENTS=( clang clang-tools-extra )
-LLVM_MANPAGES=build
+LLVM_MANPAGES=
 LLVM_TEST_COMPONENTS=(
 	llvm/lib/Testing/Support
 	llvm/utils/{lit,llvm-lit,unittest}
@@ -245,9 +252,11 @@ multilib_src_configure() {
 		-DBUILD_SHARED_LIBS=OFF
 		-DCLANG_LINK_CLANG_DYLIB=ON
 		-DLLVM_DISTRIBUTION_COMPONENTS=$(get_distribution_components)
+		-DCLANG_INSTALL_GCC_SYMLINKS=$(usex gcc-symlinks)
 
 		-DLLVM_TARGETS_TO_BUILD="${LLVM_TARGETS// /;}"
 		-DLLVM_BUILD_TESTS=$(usex test)
+		-DLLVM_ENABLE_CLASSIC_FLANG=$(usex flang)
 
 		# these are not propagated reliably, so redefine them
 		-DLLVM_ENABLE_EH=ON
@@ -258,9 +267,13 @@ multilib_src_configure() {
 		# furthermore, it provides only syntax checking
 		-DCLANG_DEFAULT_OPENMP_RUNTIME=libomp
 
-		# override default stdlib and rtlib
+		# create gcc symlinks: gcc g++ cc cpp c++
+		-DCLANG_INSTALL_GCC_SYMLINKS=$(usex gcc-symlinks)
+
+		# override default stdlib and rtlib and libunwind
 		-DCLANG_DEFAULT_CXX_STDLIB=$(usex default-libcxx libc++ "")
 		-DCLANG_DEFAULT_RTLIB=$(usex default-compiler-rt compiler-rt "")
+		-DCLANG_DEFAULT_UNWINDLIB=$(usex default-libunwind libunwind "")
 		-DCLANG_DEFAULT_LINKER=$(usex default-lld lld "")
 
 		-DCLANG_ENABLE_ARCMT=$(usex static-analyzer)
@@ -357,9 +370,13 @@ src_install() {
 	local llvm_version=$(llvm-config --version) || die
 	local clang_version=$(ver_cut 1 "${llvm_version}")
 	local clang_full_version=$(ver_cut 1-3 "${llvm_version}")
-	local clang_tools=( clang clang++ clang-cl clang-cpp )
+	local clang_tools=( clang clang++ clang-cl clang-cpp gcc g++ cpp )
 	local abi i
 
+	if use flang; then
+		clang_tools+=( flang gfortran )
+	fi
+
 	# cmake gives us:
 	# - clang-X
 	# - clang -> clang-X
@@ -409,7 +426,7 @@ multilib_src_install_all() {
 	fi
 
 	docompress "/usr/lib/llvm/${SLOT}/share/man"
-	llvm_install_manpages
+	#llvm_install_manpages
 	# match 'html' non-compression
 	use doc && docompress -x "/usr/share/doc/${PF}/tools-extra"
 	# +x for some reason; TODO: investigate
diff --git a/sys-devel/distcc/distcc-3.3.3-r3.ebuild b/sys-devel/distcc/distcc-3.3.3-r3.ebuild
index 729f2211d69..1d01590ae4b 100644
--- a/sys-devel/distcc/distcc-3.3.3-r3.ebuild
+++ b/sys-devel/distcc/distcc-3.3.3-r3.ebuild
@@ -75,6 +75,7 @@ src_configure() {
 	local myconf=(
 		--disable-Werror
 		--libdir=/usr/lib
+		--without-libiberty
 		$(use_enable ipv6 rfc2553)
 		$(use_with gtk)
 		--without-gnome
diff --git a/sys-devel/distcc/files/distccd.service-1 b/sys-devel/distcc/files/distccd.service-1
index 9bd470297df..fd481026e27 100644
--- a/sys-devel/distcc/files/distccd.service-1
+++ b/sys-devel/distcc/files/distccd.service-1
@@ -4,7 +4,7 @@ After=network.target
 
 [Service]
 User=distcc
-ExecStart=/usr/bin/distccd --no-detach --daemon --port 3632 -N 15 --allow $ALLOWED_SERVERS
+ExecStart=/usr/bin/distccd --no-detach --daemon --port 3632 -N 15 $ALLOWED_SERVERS
 
 [Install]
 WantedBy=multi-user.target
diff --git a/sys-devel/llvm/llvm-12.0.0_rc4.ebuild b/sys-devel/llvm/llvm-12.0.0_rc4.ebuild
index 099dadeda31..11e8b9c7e16 100644
--- a/sys-devel/llvm/llvm-12.0.0_rc4.ebuild
+++ b/sys-devel/llvm/llvm-12.0.0_rc4.ebuild
@@ -32,6 +32,8 @@ IUSE="debug doc exegesis gold libedit +libffi ncurses test xar xml z3
 REQUIRED_USE="|| ( ${ALL_LLVM_TARGETS[*]} )"
 RESTRICT="!test? ( test )"
 
+IUSE="${IUSE} +flang binutils-symlinks"
+
 RDEPEND="
 	sys-libs/zlib:0=[${MULTILIB_USEDEP}]
 	exegesis? ( dev-libs/libpfm:= )
@@ -66,7 +68,7 @@ PDEPEND="sys-devel/llvm-common
 	gold? ( >=sys-devel/llvmgold-${SLOT} )"
 
 LLVM_COMPONENTS=( llvm )
-LLVM_MANPAGES=build
+LLVM_MANPAGES=
 llvm.org_set_globals
 
 python_check_deps() {
@@ -318,6 +320,23 @@ get_distribution_components() {
 				docs-llvm-man
 			)
 		fi
+
+		use binutils-symlinks && out+=(
+			addr2line
+			ar
+			c++filt
+			dlltool
+			dwp
+			nm
+			objcopy
+			objdump
+			ranlib
+			readelf
+			size
+			strings
+			strip
+                )
+
 		use doc && out+=(
 			docs-llvm-html
 		)
@@ -349,6 +368,7 @@ multilib_src_configure() {
 		-DLLVM_BUILD_LLVM_DYLIB=ON
 		-DLLVM_LINK_LLVM_DYLIB=ON
 		-DLLVM_DISTRIBUTION_COMPONENTS=$(get_distribution_components)
+		-DLLVM_INSTALL_BINUTILS_SYMLINKS=$(usex binutils-symlinks)
 
 		# cheap hack: LLVM combines both anyway, and the only difference
 		# is that the former list is explicitly verified at cmake time
@@ -365,6 +385,7 @@ multilib_src_configure() {
 		-DLLVM_ENABLE_EH=ON
 		-DLLVM_ENABLE_RTTI=ON
 		-DLLVM_ENABLE_Z3_SOLVER=$(usex z3)
+		-DLLVM_ENABLE_CLASSIC_FLANG=$(usex flang)
 
 		-DLLVM_HOST_TRIPLE="${CHOST}"
 
@@ -512,7 +533,7 @@ multilib_src_install_all() {
 	_EOF_
 
 	docompress "/usr/lib/llvm/${SLOT}/share/man"
-	llvm_install_manpages
+	#llvm_install_manpages
 }
 
 pkg_postinst() {
diff --git a/sys-libs/liburing/liburing-0.7-r1.ebuild b/sys-libs/liburing/liburing-0.7-r1.ebuild
index 715212503eb..3eb405715f9 100644
--- a/sys-libs/liburing/liburing-0.7-r1.ebuild
+++ b/sys-libs/liburing/liburing-0.7-r1.ebuild
@@ -43,7 +43,7 @@ multilib_src_configure() {
 }
 
 multilib_src_compile() {
-	emake V=1 AR="$(tc-getAR)" RANLIB="$(tc-getRANLIB)"
+	emake V=1 AR="$(tc-getAR)" RANLIB="$(tc-getRANLIB)" src
 }
 
 multilib_src_install_all() {
diff --git a/www-client/firefox/firefox-87.0.ebuild b/www-client/firefox/firefox-87.0.ebuild
index 863cf66dd2d..80c9ccf75a4 100644
--- a/www-client/firefox/firefox-87.0.ebuild
+++ b/www-client/firefox/firefox-87.0.ebuild
@@ -5,7 +5,7 @@ EAPI="7"
 
 FIREFOX_PATCHSET="firefox-87-patches-03.tar.xz"
 
-LLVM_MAX_SLOT=11
+LLVM_MAX_SLOT=12
 
 PYTHON_COMPAT=( python3_{7..9} )
 PYTHON_REQ_USE="ncurses,sqlite,ssl"
@@ -77,6 +77,14 @@ BDEPEND="${PYTHON_DEPS}
 	virtual/pkgconfig
 	>=virtual/rust-1.47.0
 	|| (
+		(
+			sys-devel/clang:12
+			sys-devel/llvm:12
+			clang? (
+				=sys-devel/lld-12*
+				pgo? ( =sys-libs/compiler-rt-sanitizers-12*[profile] )
+			)
+		)
 		(
 			sys-devel/clang:11
 			sys-devel/llvm:11
@@ -502,11 +510,6 @@ src_prepare() {
 		|| die "sed failed to set num_cores"
 
 	# sed-in toolchain prefix
-	sed -i \
-		-e "s/objdump/${CHOST}-objdump/" \
-		"${S}"/python/mozbuild/mozbuild/configure/check_debug_ranges.py \
-		|| die "sed failed to set toolchain prefix"
-
 	sed -i \
 		-e 's/ccache_stats = None/return None/' \
 		"${S}"/python/mozbuild/mozbuild/controller/building.py \
diff --git a/x11-misc/sddm/Manifest b/x11-misc/sddm/Manifest
index 09a0d01520a..cfad9e72954 100644
--- a/x11-misc/sddm/Manifest
+++ b/x11-misc/sddm/Manifest
@@ -1,2 +1,2 @@
 DIST sddm-0.15.0.tar.gz 3520188 BLAKE2B b29a994a0ea2fbbda3f5eaf16885fdfa513a759e5db4d879eed2a7cae1472b90124d2ca65404edae8727a047a9d761b72382dc9ddb206f8dc35b5101856cf377 SHA512 4440acfc6f98ab8efe8e3a441e8dc9ee98615c3544f8adc899bc4f0334e4f1b0d37c1ef823b32cc466adc8fac942cd188b33eb49795e0468a136a959c65c7566
-DIST sddm-0.18.1.tar.xz 3402972 BLAKE2B 99ab43d374e9a3d318f692a6d496d8a6d68927af3c8e8fc2208d7355ec90649a14758b39f5733dd32f942ed569de88085576d4f5f8666f4f97079e0fb6dcb99e SHA512 ff0637600cda2f4da1f643f047f8ee822bd9651ae4ccbb614b9804175c97360ada7af93e07a7b63832f014ef6e7d1b5380ab2b8959f8024ea520fa5ff17efd60
+DIST sddm-0.19.0.tar.xz 3406056 BLAKE2B 4f5c19928483a2ad6584d7d42745d32f6b8fd2e4c5b4a44ab79cb878d9c9fea05f2550b83da02d365f42f9ec4530041991dfdf01aaaf55a245621b22d9054818 SHA512 0a40816bc105a1e930fec2d65fabff0ae7e27c641235d90e41f6fbaa86af4bb774a9e30f7548ce2c6c791e6d4f8195b02afddedca60a9e7c77447702e728edc3
diff --git a/x11-misc/sddm/files/pam-1.4-substack.patch b/x11-misc/sddm/files/pam-1.4-substack.patch
index b0467b26822..518490c9a0c 100644
--- a/x11-misc/sddm/files/pam-1.4-substack.patch
+++ b/x11-misc/sddm/files/pam-1.4-substack.patch
@@ -3,7 +3,7 @@
 @@ -1,6 +1,5 @@
  #%PAM-1.0
  auth        required    pam_env.so
--auth        required    pam_tally.so file=/var/log/faillog onerr=succeed
+-auth        required    pam_tally2.so file=/var/log/tallylog onerr=succeed
  auth        required    pam_shells.so
  auth        required    pam_nologin.so
  auth        required    pam_permit.so
@@ -28,4 +28,4 @@
 -session		include		system-login
 +session		substack		system-login
  -session		optional	pam_gnome_keyring.so auto_start
- -session  optional  pam_kwallet5.so auto_start
\ No newline at end of file
+ -session  optional  pam_kwallet5.so auto_start
