--- a/support/export/client.c
+++ b/support/export/client.c
@@ -309,7 +309,8 @@ client_lookup(char *hname, int canonical
                init_addrlist(clp, ai);
 
 out:
-       freeaddrinfo(ai);
+       if (ai)
+               freeaddrinfo(ai);
        return clp;
 }
 
