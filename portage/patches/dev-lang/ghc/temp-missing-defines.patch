--- a/includes/rts/storage/ClosureMacros.h	2020-01-18 15:25:07.282150485 +0100
+++ b/includes/rts/storage/ClosureMacros.h	2020-01-18 14:36:36.241188677 +0100
@@ -204,6 +204,14 @@
    Macros for untagging and retagging closure pointers
    For more information look at the comments in Cmm.h
    ------------------------------------------------------------------------- */
+#if SIZEOF_VOID_P == 4
+#define TAG_BITS                2
+#elif SIZEOF_VOID_P == 8
+#define TAG_BITS                3
+#else
+#error Unknown word size
+#endif
+#define TAG_MASK ((1 << TAG_BITS) - 1)
 
 static inline StgWord
 GET_CLOSURE_TAG(const StgClosure * p)
