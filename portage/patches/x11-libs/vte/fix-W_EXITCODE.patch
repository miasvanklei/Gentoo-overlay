--- a/src/widget.cc
+++ b/src/widget.cc
@@ -28,6 +28,10 @@
 #include "vtegtk.hh"
 #include "debug.h"
 
+#ifndef W_EXITCODE
+#define W_EXITCODE(ret, sig)  ((ret) << 8 | (sig))
+#endif
+
 using namespace std::literals;
 
 namespace vte {
