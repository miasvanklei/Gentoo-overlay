diff --git a/ghcide.cabal b/ghcide.cabal
index 86f06d4..762bfc1 100644
--- a/ghcide.cabal
+++ b/ghcide.cabal
@@ -32,6 +32,16 @@ flag ghc-lib
   default: False
   manual: True
 
+flag benchHist
+  description: build benchmark utility
+  default: False
+  manual: True
+
+flag test-preprocessor
+  description: build test preprocessor utility
+  default: False
+  manual: True
+
 library
     default-language:   Haskell2010
     build-depends:
@@ -166,6 +176,10 @@ library
     ghc-options: -Wall -Wno-name-shadowing
 
 executable ghcide-test-preprocessor
+    if flag(test-preprocessor)
+      buildable: True
+    else
+      buildable: False
     default-language: Haskell2010
     hs-source-dirs: test/preprocessor
     ghc-options: -Wall -Wno-name-shadowing
@@ -175,7 +189,10 @@ executable ghcide-test-preprocessor
 
 executable benchHist
     default-language: Haskell2010
-    buildable: True
+    if flag(benchHist)
+      buildable: True
+    else
+      buildable: False
     ghc-options: -Wall -Wno-name-shadowing -threaded
     main-is: bench/Hist/Main.hs
     default-extensions:
