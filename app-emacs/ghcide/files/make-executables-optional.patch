diff --git a/ghcide.cabal b/ghcide.cabal
index 74da7fd..4ea28ef 100644
--- a/ghcide.cabal
+++ b/ghcide.cabal
@@ -32,6 +32,16 @@ flag ghc-lib
   default: False
   manual: True
 
+flag bench
+  description: build benchmark utility
+  default: False
+  manual: True
+
+flag test-preprocessor
+  description: build test preprocessor utility
+  default: False
+  manual: True
+
 library
     default-language:   Haskell2010
     build-depends:
@@ -166,6 +176,10 @@ library
     ghc-options: -Wall -Wno-name-shadowing
 
 executable ghcide-test-preprocessor
+    if flag(test-preprocessor)
+      buildable: True
+    else
+      buildable: False
     default-language: Haskell2010
     hs-source-dirs: test/preprocessor
     ghc-options: -Wall -Wno-name-shadowing
@@ -348,6 +362,10 @@ executable ghcide-bench
     default-language: Haskell2010
     build-tool-depends:
         ghcide:ghcide
+    if flag(bench)
+      buildable: True
+    else
+      buildable: False
     build-depends:
         aeson,
         base,
