--- pam_rundir.c.bak	2016-03-03 10:33:04.118652607 +0100
+++ pam_rundir.c	2016-03-03 10:33:12.372652034 +0100
@@ -197,7 +197,7 @@
             r = write (fd, buf + w, l - w);
             if (r < 0)
             {
-                if (errno = EINTR)
+                if (errno == EINTR)
                     continue;
                 if (w > 0)
                     emergency_invalidate_counter (fd);
