--- a/src/github.com/snapcore/snapd/cmd/libsnap-confine-private/utils.h
+++ b/src/github.com/snapcore/snapd/cmd/libsnap-confine-private/utils.h
@@ -19,6 +19,8 @@
 
 #include <stdlib.h>
 #include <stdbool.h>
+#include <sys/stat.h>
+#include <limits.h>
 
 __attribute__ ((noreturn))
     __attribute__ ((format(printf, 1, 2)))
--- a/src/github.com/snapcore/snapd/cmd/snapd-generator/main.c
+++ b/src/github.com/snapcore/snapd/cmd/snapd-generator/main.c
@@ -18,6 +18,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+#include <limits.h>
 
 #include "config.h"
 
