From cadbe71d19421acd26d24fcd7bdee1dfac8e1df1 Mon Sep 17 00:00:00 2001
From: Khem Raj <raj.khem@gmail.com>
Date: Sat, 12 Sep 2015 20:30:25 +0000
Subject: [PATCH] Include sys/file.h for LOCK_* defines

Fixes errors like

error: 'LOCK_EX' undeclared

Signed-off-by: Khem Raj <raj.khem@gmail.com>
---
 src/shared/machine-image.c | 1 +
 src/shared/machine-pool.c  | 1 +
 2 files changed, 2 insertions(+)

diff --git a/src/shared/machine-image.c b/src/shared/machine-image.c
index d2f1c4a..be9a625 100644
--- a/src/shared/machine-image.c
+++ b/src/shared/machine-image.c
@@ -25,6 +25,7 @@
 #include <string.h>
 #include <sys/file.h>
 #include <sys/stat.h>
+#include <sys/file.h>
 #include <unistd.h>
 #include <linux/fs.h>
 #include "alloc-util.h"
diff --git a/src/shared/machine-pool.c b/src/shared/machine-pool.c
index f080b84..bd22826 100644
--- a/src/shared/machine-pool.c
+++ b/src/shared/machine-pool.c
@@ -31,6 +31,7 @@
 #include <sys/stat.h>
 #include <sys/statfs.h>
 #include <sys/statvfs.h>
+#include <sys/file.h>
 #include <unistd.h>
 
 #include "sd-bus-protocol.h"
--- a/src/nspawn/nspawn-network.c	2016-07-17 16:46:57.983570084 +0200
+++ b/src/nspawn/nspawn-network.c	2016-07-17 16:47:41.357566516 +0200
@@ -19,6 +19,7 @@
 
 #include <linux/veth.h>
 #include <net/if.h>
+#include <sys/file.h>
 
 #include "libudev.h"
 #include "sd-id128.h"
