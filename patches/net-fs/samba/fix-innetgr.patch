--- a/source3/wscript	2018-11-01 11:05:41.111029416 +0100
+++ b/source3/wscript	2018-11-01 11:41:57.360485743 +0100
@@ -600,7 +600,7 @@
                                 headers='unistd.h sys/types.h dirent.h',
                                 define='HAVE_DIRENT_D_OFF')
 
-    if (conf.CONFIG_SET('HAVE_YP_GET_DEFAULT_DOMAIN')):
+    if (conf.CONFIG_SET('HAVE_YP_GET_DEFAULT_DOMAIN') and conf.CONFIG_SET('HAVE_INNETGR') ):
            conf.DEFINE('HAVE_NETGROUP', '1')
 
     # Look for CUPS
