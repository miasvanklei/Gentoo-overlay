diff --git a/include/llvm/Config/config.h b/include/llvm/Config/config.h
index d0acf1d..fdae47f 100644
--- a/include/llvm/Config/config.h
+++ b/include/llvm/Config/config.h
@@ -20,7 +20,10 @@
 #endif
 
 /* Define to 1 if you have the `backtrace' function. */
+#if __has_include(<execinfo.h>)
 #define HAVE_BACKTRACE 1
+/* #undef HAVE_BACKTRACE */
+#endif
 
 /* Define to 1 if you have the <cxxabi.h> header file. */
 #define HAVE_CXXABI_H 1
@@ -46,7 +49,10 @@
 #define HAVE_ERRNO_H 1
 
 /* Define to 1 if you have the <execinfo.h> header file. */
+#if __has_include(<execinfo.h>)
 #define HAVE_EXECINFO_H 1
+/* #undef HAVE_EXECINFO_H */
+#endif
 
 /* Define to 1 if you have the <fcntl.h> header file. */
 #define HAVE_FCNTL_H 1
